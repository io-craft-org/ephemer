{% extends 'base.html' %}

{% load bootstrap_icons %}

{% block content %}
<div class="col-11 mx-auto py-4">

    <h3>Expérience en cours : {{ session.name }}</h3>

    <p>
        {% if otree_session %}
        <span class="badge bg-success">Session en cours</span>
        {% else %}
        <span class="badge bg-danger">Session non joignable</span>
        {% endif %}
    </p>

    {% if otree_session %}

    <p>
        Adresse de participation : <a href="{{ request.scheme }}://{{ request.get_host }}{% url 'experiments-session-join' session.pk %}" target="_new">{{ request.scheme }}://{{ request.get_host }}{% url 'experiments-session-join' session.pk %}</a>

        <br/>
        Code d'acces : {{ session.pin_code }}
    </p>

    <div>
        DEBUG OTREE
        <ul>
            <li># de partcipants : {{ otree_session.num_participants }}</li>
            <li>Lien de participation : {{ otree_session.participant_link }}</li>
            <li>Participants:
                <ul>
                    {% for participant in otree_session.participants %}
                    <li>
                        #{{ participant.id_in_session }} / Code: {{ participant.access_code }}
                    </li>
                    {% endfor %}
                </ul>
            </li>
        </ul>
    </div>
    {% else %}
    <br>
    Il est possible que ce soit temporaire, n'hésitez pas à réessayer d'ici quelques minutes
    {% endif %}

</div>

{% endblock %}
